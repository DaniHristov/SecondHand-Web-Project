@model IEnumerable<IncomingOrdersViewModel>

@{
    ViewData["Title"] = "Входящи поръчки";
}

<head>

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel="stylesheet">
    <link href="~/css/site.css" rel="stylesheet" />
    @*<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>*@
    @*<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>*@
</head>

@if (!Model.Any())
{
    <div class="text-center">
        <hr />
        <h1 class="text-center">Все още нямате входящи поръчки!</h1>
        <a class="btn btn-primary mt-3" role="button" asp-controller="Products" asp-action="Add">Добави продукт!</a>
        <hr />
    </div>
}

<div class="col-sm-12 offset-lg-2 col-lg-8 offset-xl-3 col-xl-6">
    <h1 class="text-center">Входящи поръчки</h1>
    <hr />
    @foreach (var order in Model)
    {
        <div class="card mb-3" style="max-width: 540px;">
            <div class="row g-0">
                <div class="col-md-4">
                    <img src=@order.ImageURL class="img-fluid rounded-start" alt="Image">
                </div>
                <div class="col-md-8 text-center">
                    <div class="card-body">
                        @*<h5 class="card-title font-weight-bold">@product.Title</h5>*@
                        <p class="card-text"><span class="font-weight-bold">Име: </span>@order.FirstName</p>
                        <p class="card-text"><span class="font-weight-bold">Фамилия: </span>@order.LastName</p>
                        <p class="card-text"><span class="font-weight-bold">Телефон: </span>@order.PhoneNumber</p>
                        <p class="card-text"><span class="font-weight-bold">Адрес: </span>@order.ShippingAddress</p>
                        <p class="card-text"><span class="font-weight-bold">Цена: </span>@order.Price</p>
                        <hr />

                        @{
                            if (order.Status == "0")
                            {
                                order.Status = "Изчакване";
                            }
                        }

                        @if (order.Status == "Изчакване")
                        {
                            <p class="card-text text-warning font-weight-bold"><span class="font-weight-bold text-dark">Статус: </span>@order.Status</p>

                        }

                        @if (order.Status == "Изпълнена")
                        {
                            <p class="card-text text-success font-weight-bold"><span class="font-weight-bold text-dark">Статус: </span>@order.Status</p>
                        }

                        @if (order.Status == "Отказана")
                        {
                            <p class="card-text text-danger font-weight-bold"><span class="font-weight-bold text-dark">Статус: </span>@order.Status</p>
                        }


                    </div>
                    @if (order.Status != "Изпълнена" && order.Status != "Отказана")
                    {
                        <a asp-controller="Orders" asp-action="CompleteOrder" asp-route-id="@order.Id" class="btn btn-success mr-3">Изпълни</a>
                        <a asp-controller="Orders" asp-action="DeclineOrder" asp-route-id="@order.Id" class="btn btn-danger">Откажи</a>
                    }
                </div>
            </div>
        </div>

    }
</div>
